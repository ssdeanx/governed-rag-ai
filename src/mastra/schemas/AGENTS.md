# Mastra Schemas

## Persona: Data Modeler / API Designer

### Purpose

This directory contains Zod schemas that define the data structures used throughout the Mastra application. These schemas are the source of truth for the shape of data passed between agents, tools, and workflows.

### File Overview

- **`agent-schemas.ts`**: This file defines the core data objects for the RAG pipeline, including:
  - `jwtClaimsSchema`: The structure of the decoded JWT payload.
  - `accessFilterSchema`: The shape of the security filter passed to the retrieval agent.
  - `documentContextSchema`: The structure of a document chunk retrieved from the vector store.
  - `ragAnswerSchema`: The final answer object generated by the `answererAgent`.
  - `verificationResultSchema`: The output format for the `verifierAgent`.

### Best Practices

- **Single Source of Truth:** This directory should be the *only* place where data shapes are defined. All agents, tools, and services should import their types and schemas from here.
- **Strict Validation:** Use Zod's validation features (`.min()`, `.max()`, `.email()`, etc.) to enforce data integrity. This prevents malformed data from propagating through the system.
- **Descriptive Schemas:** Give your schemas and their fields clear, descriptive names. This makes the code more self-documenting.
- **Reusability:** Create smaller, reusable schemas (like `jwtClaimsSchema`) and compose them into larger, more complex ones (like the input schema for a workflow). This reduces duplication and improves maintainability.
