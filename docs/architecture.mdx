import {
    Badge,
    Button,
    Card,
    CardContent,
    CardDescription,
    CardHeader,
    CardTitle,
    Alert,
    AlertDescription,
    AlertTitle,
    Tabs,
    TabsContent,
    TabsList,
    TabsTrigger,
    Mermaid,
    Layers,
    Database,
    Brain,
    Shield,
    Settings,
    ArrowRight,
    Zap,
    FileText,
    Users,
    CheckCircle,
    Typography,
    Box,
} from '@/components/docs/mdx-bridge.joy'

# System Architecture

The Mastra Governed RAG is built around Mastra's multi-agent orchestration framework, integrating Next.js for the frontend/API, PostgreSQL with PgVector for vector storage, and Google Gemini for embeddings/LLM. The core logic resides in `src/mastra/`, with workflows coordinating agents, tools, and services for secure RAG operations.

<Alert className="mb-6">
    <Layers className="h-4 w-4" />
    <AlertTitle>Multi-Agent Architecture</AlertTitle>
    <AlertDescription>
        Specialized AI agents work together in orchestrated workflows to ensure
        security, accuracy, and compliance at every step of the RAG pipeline.
    </AlertDescription>
</Alert>

<!-- toc -->

## High-Level Components

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)', lg: 'repeat(4, 1fr)' }, gap: 2, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1, fontSize: '1rem' }}>
        <Zap sx={{ fontSize: 20, color: 'primary.main' }} />
        Frontend (Next.js)
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
        <li>• Chat interface</li>
        <li>• Authentication panel</li>
        <li>• Document indexing UI</li>
        <li>• API routes (/api/chat, /api/index)</li>
      </Box>
    </CardContent>
  </Card>

<Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
        <CardTitle
            sx={{
                display: 'flex',
                alignItems: 'center',
                gap: 1,
                fontSize: '1rem',
            }}
        >
            <Brain sx={{ fontSize: 20, color: 'secondary.main' }} />
            Backend (Mastra)
        </CardTitle>
    </CardHeader>
    <CardContent>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
            <li>• Agent orchestration</li>
            <li>• Workflow management</li>
            <li>• Security enforcement</li>
            <li>• Business logic services</li>
        </Box>
    </CardContent>
</Card>

<Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
        <CardTitle
            sx={{
                display: 'flex',
                alignItems: 'center',
                gap: 1,
                fontSize: '1rem',
            }}
        >
            <Database sx={{ fontSize: 20, color: 'success.main' }} />
            Storage Layer
        </CardTitle>
    </CardHeader>
    <CardContent>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
            <li>• PostgreSQL with PgVector</li>
            <li>• LibSQL metadata store</li>
            <li>• Security payloads</li>
            <li>• Audit logging</li>
        </Box>
    </CardContent>
</Card>

  <Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1, fontSize: '1rem' }}>
        <Settings sx={{ fontSize: 20, color: 'warning.main' }} />
        CLI Tools
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
        <li>• Document indexing</li>
        <li>• Query testing</li>
        <li>• Demo scenarios</li>
        <li>• System management</li>
      </Box>
    </CardContent>
  </Card>
</Box>

## System Architecture Overview

<Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1, mb: 3 }}>

```mermaid
graph TB
  subgraph "Frontend Layer"
      A[Next.js App]
      B[Chat Interface]
      C[Auth Panel]
      D[Admin UI]
  end

  subgraph "API Layer"
      E[Next.js API Routes]
      F[/api/chat]
      G[/api/index]
      H[/api/auth]
  end

  subgraph "Mastra Orchestration"
      I[Mastra Server]
      J[Agent Manager]
      K[Workflow Engine]
      L[Security Enforcer]
  end

  subgraph "Agent Layer"
      M[Retriever Agent]
      N[Validator Agent]
      O[Summarizer Agent]
      P[Response Agent]
  end

  subgraph "Storage Layer"
      Q[(PgVector Vectors)]
      R[(LibSQL Metadata)]
      S[(Security Store)]
  end

  subgraph "External Services"
      T[Google Gemini API]
      U[Auth Provider]
      V[Audit Logger]
  end

  A --> E
  B --> F
  C --> H
  D --> G
  E --> I
  I --> J
  J --> K
  K --> L
  L --> M
  L --> N
  L --> O
  L --> P
  M --> Q
  N --> R
  O --> S
  P --> T
  I --> U
  L --> V

  style A fill:#e3f2fd
  style I fill:#fff3e0
  style M fill:#f3e5f5
  style Q fill:#e8f5e8
```

</Box>

## Core Directory Structure

<Card variant="outlined" sx={{ mb: 3 }}>
  <CardHeader>
    <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
      <Layers sx={{ fontSize: 20 }} />
      Mastra Core (src/mastra/)
    </CardTitle>
  </CardHeader>
  <CardContent>
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 2 }}>
      <Box>
        <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Agents (16+ specialized)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.875rem' } }}>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>retrieve.agent.ts</Typography> - Vector search with security</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>rerank.agent.ts</Typography> - Relevance scoring</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>answerer.agent.ts</Typography> - Response generation</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>verifier.agent.ts</Typography> - Security compliance</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>policy.agent.ts</Typography> - Policy enforcement</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>researchAgent.ts</Typography> - Research capabilities</li>
        </Box>
      </Box>
      <Box>
        <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Workflows (6+ main)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.875rem' } }}>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>governed-rag-answer.workflow.ts</Typography></li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>governed-rag-index.workflow.ts</Typography></li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>chatWorkflow.ts</Typography></li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>researchWorkflow.ts</Typography></li>
        </Box>
        <Typography sx={{ fontWeight: 'bold', mb: 1, mt: 2 }}>Tools (2 core)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.875rem' } }}>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>vector-query.tool.ts</Typography></li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>jwt-auth.tool.ts</Typography></li>
        </Box>
      </Box>
    </Box>
    <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Services (10 utility classes)</Typography>
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: 'repeat(2, 1fr)', md: 'repeat(3, 1fr)' }, gap: 1, fontSize: '0.875rem' }}>
      <div>• AuthenticationService</div>
      <div>• RoleService</div>
      <div>• ValidationService</div>
      <div>• EmbeddingService</div>
      <div>• ChunkingService</div>
      <div>• DocumentProcessorService</div>
      <div>• DocumentIndexingService</div>
      <div>• VectorQueryService</div>
      <div>• VectorStorageService</div>
      <div>• WorkflowDecorators</div>
    </Box>

  </CardContent>
</Card>

## Workflows

Mastra workflows define sequential steps combining agents, tools, and services. Six main workflows handle the complete RAG lifecycle and additional specialized tasks.

<Tabs defaultValue="answer">
  <TabsList>
    <TabsTrigger value="answer">Query Workflow</TabsTrigger>
    <TabsTrigger value="index">Indexing Workflow</TabsTrigger>
    <TabsTrigger value="chat">Chat Workflow</TabsTrigger>
  </TabsList>

  <TabsContent value="answer">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle>Governed RAG Answer Workflow</CardTitle>
        <CardDescription>Secure query processing: Auth → Retrieve → Rerank → Answer → Verify</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ mb: 2 }}>
          <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Process Flow:</Typography>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
            <strong>Input:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{jwt, question}"}</Typography><br/>
            <strong>Output:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{answer, citations}"}</Typography>
          </Box>
        </Box>
        <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
          <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Query Workflow Diagram</Typography>
          <Mermaid chart={`flowchart TD
            A[User Query + JWT] --> B[JWT Validation]
            B --> C[Retrieve Agent]
            C --> D[Vector Search]
            D --> E[Rerank Agent]
            E --> F[Answerer Agent]
            F --> G[Verifier Agent]
            G --> H[Final Response]
            style A fill:#e3f2fd
            style C fill:#f3e5f5
            style F fill:#fff3e0
            style H fill:#e8f5e8`} />
        </Box>
      </CardContent>
    </Card>

  </TabsContent>

  <TabsContent value="index">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle>Governed RAG Index Workflow</CardTitle>
        <CardDescription>Document ingestion: Process → Chunk → Embed → Store</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ mb: 2 }}>
          <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Process Flow:</Typography>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
            <strong>Input:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{documents}"}</Typography><br/>
            <strong>Output:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{indexed, failed}"}</Typography>
          </Box>
        </Box>
        <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
          <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Indexing Workflow Diagram</Typography>
          <Mermaid chart={`flowchart TD
            A[Documents] --> B[Process & Chunk]
            B --> C[Generate Embeddings]
            C --> D[Store with Security]
            D --> E[Index Complete]
            style A fill:#e3f2fd
            style B fill:#f3e5f5
            style D fill:#fff3e0
            style E fill:#e8f5e8`} />
        </Box>
      </CardContent>
    </Card>

  </TabsContent>

  <TabsContent value="chat">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle>Chat Workflow</CardTitle>
        <CardDescription>Interactive conversational workflows</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
          <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Chat Workflow Diagram</Typography>
          <Mermaid chart={`flowchart TD
            A[User Message] --> B[Starter Agent]
            B --> C[Process Message]
            C --> D[Generate Response]
            D --> E[Structured Output]
            style A fill:#e3f2fd
            style C fill:#f3e5f5
            style E fill:#fff3e0`} />
        </Box>
      </CardContent>
    </Card>

  </TabsContent>
</Tabs>

## Agents & Tools

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 2, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Brain sx={{ fontSize: 20 }} />
        Specialized Agents
      </CardTitle>
      <CardDescription>LLM-powered specialists (Google Gemini 2.5 Flash)</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ mb: 2 }}>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>Retrieve</Badge>
          <Typography level="body-sm"><strong>retrieveAgent:</strong> Vector search with security filters</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>Rerank</Badge>
          <Typography level="body-sm"><strong>rerankAgent:</strong> Relevance scoring and reordering</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>Answer</Badge>
          <Typography level="body-sm"><strong>answererAgent:</strong> Response generation with citations</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>Verify</Badge>
          <Typography level="body-sm"><strong>verifierAgent:</strong> Security compliance auditing</Typography>
        </Box>
      </Box>
    </CardContent>
  </Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Settings sx={{ fontSize: 20 }} />
        Core Tools
      </CardTitle>
      <CardDescription>Reusable functions for agents</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ mb: 2 }}>
        <Typography sx={{ fontWeight: 'bold', fontSize: '0.875rem', mb: 1 }}>Vector Query Tool</Typography>
        <Typography level="body-sm" sx={{ color: 'text.tertiary', mb: 2 }}>
          Queries PgVector with embedding similarity + security filters (classification, roles, tags)
        </Typography>
        <Typography component="code" sx={{ bgcolor: 'background.surface', px: 1, py: 0.5, borderRadius: 0.5, fontSize: '0.75rem' }}>vector-query.tool.ts</Typography>
      </Box>
      <Box>
        <Typography sx={{ fontWeight: 'bold', fontSize: '0.875rem', mb: 1 }}>JWT Auth Tool</Typography>
        <Typography level="body-sm" sx={{ color: 'text.tertiary', mb: 2 }}>
          Validates and decodes JWT tokens, extracts user claims and roles
        </Typography>
        <Typography component="code" sx={{ bgcolor: 'background.surface', px: 1, py: 0.5, borderRadius: 0.5, fontSize: '0.75rem' }}>jwt-auth.tool.ts</Typography>
      </Box>
    </CardContent>

  </Card>
</Box>

## Data Flow Architecture

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '1.125rem' }}>Indexing Pipeline</CardTitle>
      <CardDescription>Document ingestion and vectorization</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'primary.main',
            color: 'primary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>API</Box>
          <Typography level="body-sm">API/CLI</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'secondary.main',
            color: 'secondary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>W</Box>
          <Typography level="body-sm">Workflow</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'success.main',
            color: 'success.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>S</Box>
          <Typography level="body-sm">Services</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'warning.main',
            color: 'warning.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>P</Box>
          <Typography level="body-sm">PgVector</Typography>
        </Box>
      </Box>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Documents flow from API/CLI through workflows and services, ultimately stored as vectors with security metadata in PgVector.
      </Typography>
    </CardContent>
  </Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '1.125rem' }}>Query Pipeline</CardTitle>
      <CardDescription>Secure retrieval and response generation</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'primary.main',
            color: 'primary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>UI</Box>
          <Typography level="body-sm">UI/API</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'secondary.main',
            color: 'secondary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>W</Box>
          <Typography level="body-sm">Workflow</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'warning.main',
            color: 'warning.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>A</Box>
          <Typography level="body-sm">Agents</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'success.main',
            color: 'success.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>R</Box>
          <Typography level="body-sm">Response</Typography>
        </Box>
      </Box>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Queries are authenticated, processed through agents with security filters, and return verified responses with citations.
      </Typography>
    </CardContent>
  </Card>
</Box>

## Security Integration

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Shield sx={{ fontSize: 20 }} />
        Security at Retrieval
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 1.5, fontSize: '0.875rem' } }}>
        <li><strong>Access Filters:</strong> Applied during vector search</li>
        <li><strong>Classification Limits:</strong> User role determines max classification</li>
        <li><strong>Tag Matching:</strong> Security tags must match user permissions</li>
        <li><strong>Zero Results:</strong> "No authorized documents found" when filtered out</li>
      </Box>
    </CardContent>
  </Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <CheckCircle sx={{ fontSize: 20 }} />
        Security at Verification
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 1.5, fontSize: '0.875rem' } }}>
        <li><strong>Policy Audit:</strong> AI agent checks for violations</li>
        <li><strong>Information Leakage:</strong> Prevents unauthorized data exposure</li>
        <li><strong>Citation Validation:</strong> Ensures citations match accessible docs</li>
        <li><strong>Compliance Check:</strong> Verifies adherence to security policies</li>
      </Box>
    </CardContent>
  </Card>
</Box>

## Logging & Monitoring

<Card variant="outlined" sx={{ mb: 3 }}>
    <CardHeader>
        <CardTitle sx={{ fontSize: '1.125rem' }}>
            Comprehensive Logging
        </CardTitle>
        <CardDescription>
            All workflow steps logged for audit and debugging
        </CardDescription>
    </CardHeader>
    <CardContent>
        <Box
            sx={{
                display: 'grid',
                gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' },
                gap: 3,
                mb: 2,
            }}
        >
            <Box>
                <Typography sx={{ fontWeight: 'bold', mb: 1 }}>
                    Application Logs
                </Typography>
                <Box
                    sx={{
                        bgcolor: 'background.surface',
                        p: 2,
                        borderRadius: 1,
                        fontSize: '0.875rem',
                    }}
                >
                    <Typography component="code" sx={{ fontSize: '0.75rem' }}>
                        logs/mastra.log
                    </Typography>
                    <br />
                    General application logging
                </Box>
            </Box>
            <Box>
                <Typography sx={{ fontWeight: 'bold', mb: 1 }}>
                    Workflow Logs
                </Typography>
                <Box
                    sx={{
                        bgcolor: 'background.surface',
                        p: 2,
                        borderRadius: 1,
                        fontSize: '0.875rem',
                    }}
                >
                    <Typography component="code" sx={{ fontSize: '0.75rem' }}>
                        logs/workflow.log
                    </Typography>
                    <br />
                    Detailed workflow execution logs
                </Box>
            </Box>
        </Box>
        <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
            All steps are logged using @mastra/loggers for complete audit
            trails, debugging, and compliance monitoring.
        </Typography>
    </CardContent>
</Card>

## Extensibility

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(3, 1fr)' }, gap: 2, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '0.875rem' }}>Add Agents/Tools</CardTitle>
    </CardHeader>
    <CardContent>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Extend Mastra config in <Typography component="code" sx={{ fontSize: '0.75rem' }}>src/mastra/index.ts</Typography> to add new specialized agents or reusable tools.
      </Typography>
    </CardContent>
  </Card>

<Card variant="outlined">
    <CardHeader>
        <CardTitle sx={{ fontSize: '0.875rem' }}>Custom Workflows</CardTitle>
    </CardHeader>
    <CardContent>
        <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
            Create new{' '}
            <Typography component="code" sx={{ fontSize: '0.75rem' }}>
                .workflow.ts
            </Typography>{' '}
            files to define custom processing pipelines and business logic.
        </Typography>
    </CardContent>
</Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '0.875rem' }}>Modular Services</CardTitle>
    </CardHeader>
    <CardContent>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Services are modular and injectable via Mastra context, making them easy to extend or replace.
      </Typography>
    </CardContent>
  </Card>
</Box>

<div className="flex gap-4">
    <Button asChild>
        <a href="/docs/demo-roles">
            <Users className="h-4 w-4 mr-2" />
            Demo Roles
            <ArrowRight className="h-4 w-4 ml-2" />
        </a>
    </Button>
    <Button variant="outline" asChild>
        <a href="/docs/api-reference">
            <FileText className="h-4 w-4 mr-2" />
            API Reference
        </a>
    </Button>
</div>
