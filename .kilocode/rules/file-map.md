# Repository file map for Kilocode rules

Purpose

- Single-source mapping of repository areas to guide Kilocode rule creation and reviews.

Mapping by category

1. Mastra - Agents

- [`src/mastra/agents/answerer.agent.ts`](src/mastra/agents/answerer.agent.ts:1)
- [`src/mastra/agents/assistant.ts`](src/mastra/agents/assistant.ts:1)
- [`src/mastra/agents/copywriterAgent.ts`](src/mastra/agents/copywriterAgent.ts:1)
- [`src/mastra/agents/editorAgent.ts`](src/mastra/agents/editorAgent.ts:1)
- [`src/mastra/agents/evaluationAgent.ts`](src/mastra/agents/evaluationAgent.ts:1)
- [`src/mastra/agents/identity.agent.ts`](src/mastra/agents/identity.agent.ts:1)
- [`src/mastra/agents/learningExtractionAgent.ts`](src/mastra/agents/learningExtractionAgent.ts:1)
- [`src/mastra/agents/policy.agent.ts`](src/mastra/agents/policy.agent.ts:1)
- [`src/mastra/agents/productRoadmapAgent.ts`](src/mastra/agents/productRoadmapAgent.ts:1)
- [`src/mastra/agents/reportAgent.ts`](src/mastra/agents/reportAgent.ts:1)
- [`src/mastra/agents/rerank.agent.ts`](src/mastra/agents/rerank.agent.ts:1)
- [`src/mastra/agents/researchAgent.ts`](src/mastra/agents/researchAgent.ts:1)
- [`src/mastra/agents/retrieve.agent.ts`](src/mastra/agents/retrieve.agent.ts:1)
- [`src/mastra/agents/selfReferencingAgent.ts`](src/mastra/agents/selfReferencingAgent.ts:1)
- [`src/mastra/agents/starterAgent.ts`](src/mastra/agents/starterAgent.ts:1)
- [`src/mastra/agents/verifier.agent.ts`](src/mastra/agents/verifier.agent.ts:1)

2. Mastra - Tools

- [`src/mastra/tools/copywriter-agent-tool.ts`](src/mastra/tools/copywriter-agent-tool.ts:1)
- [`src/mastra/tools/data-file-manager.ts`](src/mastra/tools/data-file-manager.ts:1)
- [`src/mastra/tools/editor-agent-tool.ts`](src/mastra/tools/editor-agent-tool.ts:1)
- [`src/mastra/tools/evaluateResultTool.ts`](src/mastra/tools/evaluateResultTool.ts:1)
- [`src/mastra/tools/extractLearningsTool.ts`](src/mastra/tools/extractLearningsTool.ts:1)
- [`src/mastra/tools/jwt-auth.tool.ts`](src/mastra/tools/jwt-auth.tool.ts:1)
- [`src/mastra/tools/roadmapTool.ts`](src/mastra/tools/roadmapTool.ts:1)
- [`src/mastra/tools/starter-agent-tool.ts`](src/mastra/tools/starter-agent-tool.ts:1)
- [`src/mastra/tools/vector-query.tool.ts`](src/mastra/tools/vector-query.tool.ts:1)
- [`src/mastra/tools/weather-tool.ts`](src/mastra/tools/weather-tool.ts:1)
- [`src/mastra/tools/web-scraper-tool.ts`](src/mastra/tools/web-scraper-tool.ts:1)

3. Mastra - Services

- [`src/mastra/services/AuthenticationService.ts`](src/mastra/services/AuthenticationService.ts:1)
- [`src/mastra/services/ChunkingService.ts`](src/mastra/services/ChunkingService.ts:1)
- [`src/mastra/services/DocumentIndexingService.ts`](src/mastra/services/DocumentIndexingService.ts:1)
- [`src/mastra/services/DocumentProcessorService.ts`](src/mastra/services/DocumentProcessorService.ts:1)
- [`src/mastra/services/EmbeddingService.ts`](src/mastra/services/EmbeddingService.ts:1)
- [`src/mastra/services/RoleService.ts`](src/mastra/services/RoleService.ts:1)
- [`src/mastra/services/ValidationService.ts`](src/mastra/services/ValidationService.ts:1)
- [`src/mastra/services/VectorQueryService.ts`](src/mastra/services/VectorQueryService.ts:1)
- [`src/mastra/services/VectorStorageService.ts`](src/mastra/services/VectorStorageService.ts:1)
- [`src/mastra/services/WorkflowDecorators.ts`](src/mastra/services/WorkflowDecorators.ts:1)

4. Mastra - Configs and Policy

- [`src/mastra/config/anthropic.ts`](src/mastra/config/anthropic.ts:1)
- [`src/mastra/config/gemini-cli.ts`](src/mastra/config/gemini-cli.ts:1)
- [`src/mastra/config/google.ts`](src/mastra/config/google.ts:1)
- [`src/mastra/config/libsql-storage.ts`](src/mastra/config/libsql-storage.ts:1)
- [`src/mastra/config/libsql.ts`](src/mastra/config/libsql.ts:1)
- [`src/mastra/config/logger.ts`](src/mastra/config/logger.ts:1)
- [`src/mastra/config/openai.ts`](src/mastra/config/openai.ts:1)
- [`src/mastra/config/openrouter.ts`](src/mastra/config/openrouter.ts:1)
- [`src/mastra/config/pg-storage.ts`](src/mastra/config/pg-storage.ts:1)
- [`src/mastra/config/role-hierarchy.ts`](src/mastra/config/role-hierarchy.ts:1)
- [`src/mastra/config/vector-store.ts`](src/mastra/config/vector-store.ts:1)
- [`src/mastra/config/vertex.ts`](src/mastra/config/vertex.ts:1)
- [`src/mastra/policy/acl.yaml`](src/mastra/policy/acl.yaml:1)

5. Mastra - Workflows

- [`src/mastra/workflows/chatWorkflow.ts`](src/mastra/workflows/chatWorkflow.ts:1)
- [`src/mastra/workflows/chatWorkflow1.ts`](src/mastra/workflows/chatWorkflow1.ts:1)
- [`src/mastra/workflows/chatWorkflowTypes.ts`](src/mastra/workflows/chatWorkflowTypes.ts:1)
- [`src/mastra/workflows/chatWorkflowTypes1.ts`](src/mastra/workflows/chatWorkflowTypes1.ts:1)
- [`src/mastra/workflows/generateReportWorkflow.ts`](src/mastra/workflows/generateReportWorkflow.ts:1)
- [`src/mastra/workflows/governed-rag-answer.workflow.ts`](src/mastra/workflows/governed-rag-answer.workflow.ts:1)
- [`src/mastra/workflows/governed-rag-index.workflow.ts`](src/mastra/workflows/governed-rag-index.workflow.ts:1)
- [`src/mastra/workflows/researchWorkflow.ts`](src/mastra/workflows/researchWorkflow.ts:1)

6. Frontend - App and API

- [`app/GEMINI.md`](app/GEMINI.md:1)
- [`app/global.css`](app/global.css:1)
- [`app/layout.tsx`](app/layout.tsx:1)
- [`app/page.tsx`](app/page.tsx:1)
- [`app/about/page.tsx`](app/about/page.tsx:1)
- [`app/api/auth/login/route.ts`](app/api/auth/login/route.ts:1)
- [`app/api/auth/signout/route.ts`](app/api/auth/signout/route.ts:1)
- [`app/api/auth/signup/route.ts`](app/api/auth/signup/route.ts:1)
- [`app/api/chat/route.ts`](app/api/chat/route.ts:1)
- [`app/api/index/route.ts`](app/api/index/route.ts:1)
- [`app/blog/page.tsx`](app/blog/page.tsx:1)
- [`app/cedar-os/context.ts`](app/cedar-os/context.ts:1)
- [`app/cedar-os/GEMINI.md`](app/cedar-os/GEMINI.md:1)
- [`app/cedar-os/hooks.ts`](app/cedar-os/hooks.ts:1)
- [`app/cedar-os/mentions.ts`](app/cedar-os/mentions.ts:1)
- [`app/cedar-os/page.tsx`](app/cedar-os/page.tsx:1)
- [`app/cedar-os/state.ts`](app/cedar-os/state.ts:1)
- [`app/cedar-os/chat/page.tsx`](app/cedar-os/chat/page.tsx:1)
- [`app/cedar-os/rag/page.tsx`](app/cedar-os/rag/page.tsx:1)
- [`app/cedar-os/research/page.tsx`](app/cedar-os/research/page.tsx:1)
- [`app/contact/page.tsx`](app/contact/page.tsx:1)
- [`app/demo-rag/page.tsx`](app/demo-rag/page.tsx:1)
- [`app/docs/page.tsx`](app/docs/page.tsx:1)
- [`app/docs/[...slug]/page.tsx`](app/docs/[...slug]/page.tsx:1)
- [`app/login/page.tsx`](app/login/page.tsx:1)
- [`app/tests/actions.ts`](app/tests/actions.ts:1)
- [`app/tests/form.tsx`](app/tests/form.tsx:1)
- [`app/tests/page.tsx`](app/tests/page.tsx:1)
- [`components/AppSidebar.tsx`](components/AppSidebar.tsx:1)
- [`components/AuthPanel.tsx`](components/AuthPanel.tsx:1)
- [`components/ChatInterface.tsx`](components/ChatInterface.tsx:1)
- [`components/FeatureCard.tsx`](components/FeatureCard.tsx:1)
- [`components/Footer.tsx`](components/Footer.tsx:1)
- [`components/GEMINI.md`](components/GEMINI.md:1)
- [`components/IndexingPanel.tsx`](components/IndexingPanel.tsx:1)
- [`components/LoggedInAlert.tsx`](components/LoggedInAlert.tsx:1)
- [`components/Mermaid.tsx`](components/Mermaid.tsx:1)
- [`components/SecurityIndicator.tsx`](components/SecurityIndicator.tsx:1)
- [`components/ThemeProvider.tsx`](components/ThemeProvider.tsx:1)
- [`components/ThemeToggle.tsx`](components/ThemeToggle.tsx:1)
- [`components/TopNavigation.tsx`](components/TopNavigation.tsx:1)
- [`components/UserMenu.tsx`](components/UserMenu.tsx:1)
- [`components/docs/DocsLayout.tsx`](components/docs/DocsLayout.tsx:1)
- [`hooks/use-mobile.ts`](hooks/use-mobile.ts:1)
- [`lib/GEMINI.md`](lib/GEMINI.md:1)
- [`lib/auth.ts`](lib/auth.ts:1)
- [`lib/jwt-utils.ts`](lib/jwt-utils.ts:1)
- [`lib/mdx-plugins.js`](lib/mdx-plugins.js:1)
- [`lib/mdx-plugins.ts`](lib/mdx-plugins.ts:1)
- [`lib/utils.ts`](lib/utils.ts:1)
- [`src/mastra/utils/streamUtils.ts`](src/mastra/utils/streamUtils.ts:1)
- [`src/index.ts`](src/index.ts:1)

7. Cedar and UI components

- [`cedar/ChatModeSelector.tsx`](cedar/ChatModeSelector.tsx:1)
- [`cedar/FeatureNode.tsx`](cedar/FeatureNode.tsx:1)
- [`cedar/GEMINI.md`](cedar/GEMINI.md:1)
- [`cedar/RoadmapCanvas.tsx`](cedar/RoadmapCanvas.tsx:1)
- [`cedar/RoadmapNode.tsx`](cedar/RoadmapNode.tsx:1)
- [`cedar/badge.tsx`](cedar/badge.tsx:1)
- [`cedar/button.tsx`](cedar/button.tsx:1)
- [`cedar/dropdown-menu.tsx`](cedar/dropdown-menu.tsx:1)
- [`cedar/useRoadmapData.ts`](cedar/useRoadmapData.ts:1)
- [`cedar/components/chatComponents/CedarCaptionChat.tsx`](cedar/components/chatComponents/CedarCaptionChat.tsx:1)
- [`cedar/components/chatComponents/EmbeddedCedarChat.tsx`](cedar/components/chatComponents/EmbeddedCedarChat.tsx:1)
- [`cedar/components/chatComponents/FloatingCedarChat.tsx`](cedar/components/chatComponents/FloatingCedarChat.tsx:1)
- [`cedar/components/chatComponents/SidePanelCedarChat.tsx`](cedar/components/chatComponents/SidePanelCedarChat.tsx:1)
- [`cedar/components/chatInput/ChatInput.css`](cedar/components/chatInput/ChatInput.css:1)
- [`cedar/components/chatInput/ChatInput.tsx`](cedar/components/chatInput/ChatInput.tsx:1)
- [`cedar/components/chatInput/ContextBadgeRow.tsx`](cedar/components/chatInput/ContextBadgeRow.tsx:1)
- [`cedar/components/chatInput/FloatingChatInput.tsx`](cedar/components/chatInput/FloatingChatInput.tsx:1)
- [`cedar/components/chatInput/HumanInTheLoopIndicator.tsx`](cedar/components/chatInput/HumanInTheLoopIndicator.tsx:1)
- [`cedar/components/chatInput/index.ts`](cedar/components/chatInput/index.ts:1)
- [`cedar/components/chatMessages/CaptionMessages.tsx`](cedar/components/chatMessages/CaptionMessages.tsx:1)
- [`cedar/components/chatMessages/ChatBubbles.tsx`](cedar/components/chatMessages/ChatBubbles.tsx:1)
- [`cedar/components/chatMessages/ChatRenderer.tsx`](cedar/components/chatMessages/ChatRenderer.tsx:1)
- [`cedar/components/chatMessages/DialogueOptions.tsx`](cedar/components/chatMessages/DialogueOptions.tsx:1)
- [`cedar/components/chatMessages/MarkdownRenderer.tsx`](cedar/components/chatMessages/MarkdownRenderer.tsx:1)
- [`cedar/components/chatMessages/MultipleChoice.tsx`](cedar/components/chatMessages/MultipleChoice.tsx:1)
- [`cedar/components/chatMessages/Storyline.tsx`](cedar/components/chatMessages/Storyline.tsx:1)
- [`cedar/components/chatMessages/StorylineEdge.tsx`](cedar/components/chatMessages/StorylineEdge.tsx:1)
- [`cedar/components/chatMessages/StreamingText.tsx`](cedar/components/chatMessages/StreamingText.tsx:1)
- [`cedar/components/chatMessages/TodoList.tsx`](cedar/components/chatMessages/TodoList.tsx:1)
- [`cedar/components/chatMessages/structural/CollapsedChatButton.tsx`](cedar/components/chatMessages/structural/CollapsedChatButton.tsx:1)
- [`cedar/components/CommandBar/CommandBar.tsx`](cedar/components/CommandBar/CommandBar.tsx:1)
- [`cedar/components/CommandBar/getShortcutDisplay.ts`](cedar/components/CommandBar/getShortcutDisplay.ts:1)
- [`cedar/components/CommandBar/index.ts`](cedar/components/CommandBar/index.ts:1)
- [`cedar/components/containers/Container3D.tsx`](cedar/components/containers/Container3D.tsx:1)
- [`cedar/components/containers/Container3DButton.tsx`](cedar/components/containers/Container3DButton.tsx:1)
- [`cedar/components/containers/Flat3dButton.tsx`](cedar/components/containers/Flat3dButton.tsx:1)
- [`cedar/components/containers/Flat3dContainer.tsx`](cedar/components/containers/Flat3dContainer.tsx:1)
- [`cedar/components/containers/GlassyPaneContainer.tsx`](cedar/components/containers/GlassyPaneContainer.tsx:1)
- [`cedar/components/debugger/CollapsibleSection.tsx`](cedar/components/debugger/CollapsibleSection.tsx:1)
- [`cedar/components/debugger/DebuggerPanel.tsx`](cedar/components/debugger/DebuggerPanel.tsx:1)
- [`cedar/components/debugger/index.ts`](cedar/components/debugger/index.ts:1)
- [`cedar/components/debugger/MessagesTab.tsx`](cedar/components/debugger/MessagesTab.tsx:1)
- [`cedar/components/debugger/NetworkTab.tsx`](cedar/components/debugger/NetworkTab.tsx:1)
- [`cedar/components/debugger/StatesTab.tsx`](cedar/components/debugger/StatesTab.tsx:1)
- [`cedar/components/debugger/types.ts`](cedar/components/debugger/types.ts:1)
- [`cedar/components/diffs/DiffContainer.tsx`](cedar/components/diffs/DiffContainer.tsx:1)
- [`cedar/components/diffs/DiffText.tsx`](cedar/components/diffs/DiffText.tsx:1)
- [`cedar/components/inputs/TooltipMenu.tsx`](cedar/components/inputs/TooltipMenu.tsx:1)
- [`cedar/components/ornaments/GlowingMesh.tsx`](cedar/components/ornaments/GlowingMesh.tsx:1)
- [`cedar/components/ornaments/GlowingMeshGradient.tsx`](cedar/components/ornaments/GlowingMeshGradient.tsx:1)
- [`cedar/components/ornaments/GradientMesh.tsx`](cedar/components/ornaments/GradientMesh.tsx:1)
- [`cedar/components/ornaments/InsetGlow.tsx`](cedar/components/ornaments/InsetGlow.tsx:1)
- [`cedar/components/spells/QuestioningSpell.tsx`](cedar/components/spells/QuestioningSpell.tsx:1)
- [`cedar/components/spells/RadialMenuSpell.tsx`](cedar/components/spells/RadialMenuSpell.tsx:1)
- [`cedar/components/spells/RangeSliderSpell.tsx`](cedar/components/spells/RangeSliderSpell.tsx:1)
- [`cedar/components/spells/SliderSpell.tsx`](cedar/components/spells/SliderSpell.tsx:1)
- [`cedar/components/spells/TooltipMenuSpell.tsx`](cedar/components/spells/TooltipMenuSpell.tsx:1)
- [`cedar/components/structural/FloatingContainer.tsx`](cedar/components/structural/FloatingContainer.tsx:1)
- [`cedar/components/structural/SidePanelContainer.tsx`](cedar/components/structural/SidePanelContainer.tsx:1)
- [`cedar/components/text/PhantomText.tsx`](cedar/components/text/PhantomText.tsx:1)
- [`cedar/components/text/ShimmerText.tsx`](cedar/components/text/ShimmerText.tsx:1)
- [`cedar/components/text/TypewriterText.tsx`](cedar/components/text/TypewriterText.tsx:1)
- [`cedar/components/threads/ChatThreadController.tsx`](cedar/components/threads/ChatThreadController.tsx:1)
- [`cedar/components/ui/button.tsx`](cedar/components/ui/button.tsx:1)
- [`cedar/components/ui/command.tsx`](cedar/components/ui/command.tsx:1)
- [`cedar/components/ui/dialog.tsx`](cedar/components/ui/dialog.tsx:1)
- [`cedar/components/ui/dropdown-menu.tsx`](cedar/components/ui/dropdown-menu.tsx:1)
- [`cedar/components/ui/KeyboardShortcut.tsx`](cedar/components/ui/KeyboardShortcut.tsx:1)
- [`cedar/components/ui/Slider3D.tsx`](cedar/components/ui/Slider3D.tsx:1)
- [`cedar/components/ui/tabs.tsx`](cedar/components/ui/tabs.tsx:1)
- [`cedar/components/voice/VoiceIndicator.tsx`](cedar/components/voice/VoiceIndicator.tsx:1)

8. Corpus and Docs

- [`corpus/engineering-handbook.md`](corpus/engineering-handbook.md:1)
- [`corpus/finance-policy.md`](corpus/finance-policy.md:1)
- [`corpus/hr-confidential.md`](corpus/hr-confidential.md:1)
- [`docs/api-reference.md`](docs/api-reference.md:1)
- [`docs/api-reference.mdx`](docs/api-reference.mdx:1)
- [`docs/architecture.md`](docs/architecture.md:1)
- [`docs/architecture.mdx`](docs/architecture.mdx:1)
- [`docs/demo-roles.md`](docs/demo-roles.md:1)
- [`docs/demo-roles.mdx`](docs/demo-roles.mdx:1)
- [`docs/GEMINI.md`](docs/GEMINI.md:1)
- [`docs/index.md`](docs/index.md:1)
- [`docs/index.mdx`](docs/index.mdx:1)
- [`docs/mastra.mdx`](docs/mastra.mdx:1)
- [`docs/quick-start.md`](docs/quick-start.md:1)
- [`docs/quick-start.mdx`](docs/quick-start.mdx:1)
- [`docs/security.md`](docs/security.md:1)
- [`docs/security.mdx`](docs/security.mdx:1)
- [`docs/theme-choices.md`](docs/theme-choices.md:1)

9. Infrastructure and Docker

- [`docker/docker-compose.yml`](docker/docker-compose.yml:1)
- [`docker/ChromaDB/docker-compose.yml`](docker/ChromaDB/docker-compose.yml:1)
- [`docker/Couchbase/docker-compose.yml`](docker/Couchbase/docker-compose.yml:1)
- [`docker/LanceDB/docker-compose.yml`](docker/LanceDB/docker-compose.yml:1)
- [`docker/MongoDB/docker-compose.yml`](docker/MongoDB/docker-compose.yml:1)
- [`docker/OpenSearch/docker-compose.yml`](docker/OpenSearch/docker-compose.yml:1)
- [`docker/Pinecone/docker-compose.yml`](docker/Pinecone/docker-compose.yml:1)
- [`docker/Weaviate/docker-compose.yml`](docker/Weaviate/docker-compose.yml:1)

10. Scripts and tooling

- [`scripts/make-jwt.js`](scripts/make-jwt.js:1)
- [`scripts/smoke-run.js`](scripts/smoke-run.js:1)

11. Tests and CI artifacts

- [`vitest.config.ts`](vitest.config.ts:1)
- [`tests/`](tests:1)

How to use

- Use this file to guide rule creation; update as files change.

Next action

- File updated with complete repository mapping.

End of file
